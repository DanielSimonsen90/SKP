import { EventEmitter } from 'DanhoLibraryJS';
import { 
    ComponentEventTypes as Types,
    ComponentEventHandlers as Handlers,
    ComponentEventReturns as Returns,

    DOMEventTypes as DOMTypes,
    DOMEventHandler as DOMHandler
} from './ComponentEvents'

export default class ComponentEventEmitter extends EventEmitter {
    public componentOn<Event extends Types>(event: Event, listener: (...args: Handlers[Event]) => Returns[Event]) {
        return this.on(event, listener);
    }
    public componentOnce<Event extends Types>(event: Event, listener: (...args: Handlers[Event]) => Returns[Event]) {
        return this.once(event, listener);
    }
    public componentOff<Event extends Types>(event: Event, listener: (...args: Handlers[Event]) => Returns[Event]) {
        return this.off(event, listener);
    }
    public componentEmit<Event extends Types>(event: Event, ...args: Handlers[Event]) {
        return this.emit(event, ...args) as Array<Returns[Event]>;
    }

    public elementOn<Event extends DOMTypes>(event: Event, listener: (self: this, e: DOMHandler[Event]) => this) {
        return this.on(event, listener);
    }
    public elementOnce<Event extends DOMTypes>(event: Event, listener: (self: this, e: DOMHandler[Event]) => this) {
        return this.once(event, listener);
    }
    public elementOff<Event extends DOMTypes>(event: Event, listener: (self: this, e: DOMHandler[Event]) => this) {
        return this.off(event, listener);
    }
    public elementEmit<Event extends DOMTypes>(event: Event, e: DOMHandler[Event]) {
        this.emit(event, this, e);
        return this;
    }
}